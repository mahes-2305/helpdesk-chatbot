<!DOCTYPE html>
<html>
<head>
<title>CipherBot Admin</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<style>
.scroll-box{
    max-height:300px;
    overflow-y:auto;
}

.dashboard-card{
    border-radius:15px;
    padding:20px;
    text-align:center;
    color:white;
    background:#1f2937;
}

.big-number{
    font-size:32px;
    font-weight:bold;
}
</style>

<div class="container mt-4">

<!-- DASHBOARD -->
<div class="row mb-4">
    <div class="col-md-3">
        <div class="dashboard-card">
            <div class="big-number">{{ total_queries }}</div>
            Total Queries
        </div>
    </div>

    <div class="col-md-3">
        <div class="dashboard-card">
            <div class="big-number">{{ low_confidence_logs|length }}</div>
            Low Confidence
        </div>
    </div>

    <div class="col-md-3">
        <div class="dashboard-card">
            <div class="big-number">{{ helpful_percentage }}%</div>
            Helpful Rating
        </div>
    </div>

    <div class="col-md-3">
        <div class="dashboard-card">
            <div class="big-number">{{ today_queries }}</div>
            Today Queries
        </div>
    </div>
</div>

<!-- FAQ + EXISTING -->
<div class="row">

<div class="col-md-6">
    <div class="card p-3">
        <h5>Add FAQ</h5>
        <form method="POST" action="/add">
            <input name="question" class="form-control mb-2" placeholder="Question" required>
            <textarea name="answer" class="form-control mb-2" placeholder="Answer" required></textarea>
            <button class="btn btn-primary w-100">Add FAQ</button>
        </form>
    </div>
</div>

<div class="col-md-6">
    <div class="card p-3">
        <h5>Existing FAQs</h5>
        <div class="scroll-box">
        {% for faq in faqs %}
            <div class="border rounded p-2 mb-2">
                <strong>{{ faq[1] }}</strong>
                <p>{{ faq[2] }}</p>
                <a href="/delete/{{ faq[0] }}" class="btn btn-sm btn-danger">Delete</a>
            </div>
        {% endfor %}
        </div>
    </div>
</div>

</div>

<!-- LOW CONFIDENCE -->
<div class="card p-3 mt-4">
    <h5>‚ö† Low Confidence Queries</h5>
    <div class="scroll-box">
    {% for log in low_confidence_logs %}
        <div class="border rounded p-2 mb-2">
            <strong>User:</strong> {{ log[1] }} <br>
            <strong>Confidence:</strong> {{ log[3] }}%
        </div>
    {% endfor %}
    </div>
</div>

<!-- FULL HISTORY -->
<div class="card p-3 mt-4">
    <h5>üìú Query History</h5>
    <div class="scroll-box">
    {% for log in all_logs %}
        <div class="border rounded p-2 mb-2">
            <strong>User:</strong> {{ log[1] }} <br>
            Confidence: {{ log[2] }}% |
            üëç {{ log[3] }} |
            üëé {{ log[4] }}
        </div>
    {% endfor %}
    </div>
</div>

</div>

</body>
</html>